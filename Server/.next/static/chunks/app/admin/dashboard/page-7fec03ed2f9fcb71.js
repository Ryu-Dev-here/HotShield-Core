(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{8696:function(e,s,i){Promise.resolve().then(i.bind(i,6764))},6764:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return c}});var t=i(7437),d=i(2265),n=i(9376),a=i(7648),r=i(4545),l=i(6334);function c(){var e,s,i,c,o,h,m,x,g;let[u,v]=(0,d.useState)(null),[j,p]=(0,d.useState)(!0),[f,b]=(0,d.useState)(""),N=(0,n.useRouter)();return((0,d.useEffect)(()=>{Promise.all([fetch("/api/admin/cases").then(e=>e.json()),fetch("/api/admin/reporters").then(e=>e.json()),fetch("/api/admin/audit?limit=10").then(e=>e.json())]).then(e=>{let[s,i,t]=e,d=s.filter(e=>"VERIFIED"===e.verdict).length,n=s.filter(e=>"PENDING"===e.verdict).length,a=s.filter(e=>"DISPUTED"===e.verdict).length,r=s.filter(e=>"CLEARED"===e.verdict).length,l=i.filter(e=>e.trustScore>=70).length,c=i.filter(e=>e.trustScore<30).length,o=i.reduce((e,s)=>e+s.reportCount,0);v({cases:{total:s.length,verified:d,pending:n,disputed:a,cleared:r},reporters:{total:i.length,highTrust:l,lowTrust:c,totalReports:o},recentActivity:t.slice(0,5)}),p(!1)}).catch(e=>{b("Failed to load dashboard data"),p(!1),N.push("/admin/login")})},[N]),j)?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(r.w,{}),(0,t.jsx)("div",{className:"p-8",children:"Loading..."})]}):f?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,t.jsx)(r.w,{}),(0,t.jsx)("div",{className:"p-8 text-red-600",children:f})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-midnight-950",children:[(0,t.jsx)(r.w,{}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-midnight-100",children:"Dashboard"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(a.default,{href:"/api/analyze",children:(0,t.jsx)(l.z,{variant:"secondary",className:"text-sm",children:"Process Queue"})}),(0,t.jsx)(a.default,{href:"/admin/cases?verdict=PENDING",children:(0,t.jsx)(l.z,{variant:"secondary",className:"text-sm",children:"View Pending Cases"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("p",{className:"text-sm text-midnight-300",children:"Total Cases"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-midnight-100",children:(null==u?void 0:null===(e=u.cases)||void 0===e?void 0:e.total)||0})]}),(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("p",{className:"text-sm text-midnight-300",children:"Verified"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-red-400",children:(null==u?void 0:null===(s=u.cases)||void 0===s?void 0:s.verified)||0})]}),(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("p",{className:"text-sm text-midnight-300",children:"Pending"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-yellow-400",children:(null==u?void 0:null===(i=u.cases)||void 0===i?void 0:i.pending)||0})]}),(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("p",{className:"text-sm text-midnight-300",children:"Disputed"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-orange-400",children:(null==u?void 0:null===(c=u.cases)||void 0===c?void 0:c.disputed)||0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-midnight-100",children:"Reporters"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-midnight-300",children:"Total Reporters"}),(0,t.jsx)("span",{className:"font-bold text-midnight-100",children:(null==u?void 0:null===(o=u.reporters)||void 0===o?void 0:o.total)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-midnight-300",children:"High Trust (â‰¥70)"}),(0,t.jsx)("span",{className:"font-bold text-green-400",children:(null==u?void 0:null===(h=u.reporters)||void 0===h?void 0:h.highTrust)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-midnight-300",children:"Low Trust (<30)"}),(0,t.jsx)("span",{className:"font-bold text-red-400",children:(null==u?void 0:null===(m=u.reporters)||void 0===m?void 0:m.lowTrust)||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-midnight-300",children:"Total Reports"}),(0,t.jsx)("span",{className:"font-bold text-midnight-100",children:(null==u?void 0:null===(x=u.reporters)||void 0===x?void 0:x.totalReports)||0})]})]})]}),(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4 text-midnight-100",children:"Recent Activity"}),(0,t.jsx)("div",{className:"space-y-2",children:(null==u?void 0:null===(g=u.recentActivity)||void 0===g?void 0:g.length)>0?u.recentActivity.map((e,s)=>{var i;return(0,t.jsxs)("div",{className:"text-sm border-b border-midnight-800 pb-2 last:border-0",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"font-medium text-midnight-100",children:e.action.replace(/_/g," ")}),(0,t.jsx)("span",{className:"text-midnight-400 text-xs",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,t.jsxs)("div",{className:"text-xs text-midnight-400 mt-1",children:[null===(i=e.actor)||void 0===i?void 0:i.substring(0,16),"..."]})]},s)}):(0,t.jsx)("p",{className:"text-sm text-midnight-400",children:"No recent activity"})})]})]}),(0,t.jsxs)("div",{className:"bg-midnight-900 p-6 rounded-lg shadow-lg border border-midnight-800",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(a.default,{href:"/admin/cases",children:(0,t.jsx)(l.z,{variant:"secondary",children:"View All Cases"})}),(0,t.jsx)(a.default,{href:"/admin/reporters",children:(0,t.jsx)(l.z,{variant:"secondary",children:"Manage Reporters"})}),(0,t.jsx)(a.default,{href:"/admin/audit",children:(0,t.jsx)(l.z,{variant:"secondary",children:"View Audit Log"})})]})]})]})]})}},4545:function(e,s,i){"use strict";i.d(s,{w:function(){return r}});var t=i(7437);i(2265);var d=i(9376),n=i(7648),a=i(6334);function r(){let e=(0,d.useRouter)(),s=(0,d.usePathname)(),i=async()=>{await fetch("/api/admin/logout",{method:"POST"}),e.push("/admin/login")};return(0,t.jsx)("nav",{className:"bg-midnight-900 shadow-lg border-b border-midnight-800",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,t.jsx)(n.default,{href:"/admin/dashboard",className:"text-xl font-semibold text-midnight-100 hover:text-midnight-300",children:"HotShield Admin"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(n.default,{href:"/admin/dashboard",children:(0,t.jsx)(a.z,{variant:"/admin/dashboard"===s?"primary":"secondary",className:"text-sm",children:"Dashboard"})}),(0,t.jsx)(n.default,{href:"/admin/cases",children:(0,t.jsx)(a.z,{variant:"/admin/cases"===s||(null==s?void 0:s.startsWith("/admin/cases/"))?"primary":"secondary",className:"text-sm",children:"Cases"})}),(0,t.jsx)(n.default,{href:"/admin/reporters",children:(0,t.jsx)(a.z,{variant:"/admin/reporters"===s?"primary":"secondary",className:"text-sm",children:"Reporters"})}),(0,t.jsx)(n.default,{href:"/admin/audit",children:(0,t.jsx)(a.z,{variant:"/admin/audit"===s?"primary":"secondary",className:"text-sm",children:"Audit Log"})}),(0,t.jsx)(a.z,{variant:"secondary",onClick:i,className:"text-sm",children:"Logout"})]})]})})})}},6334:function(e,s,i){"use strict";i.d(s,{z:function(){return d}});var t=i(7437);function d(e){let{variant:s="primary",className:i="",children:d,...n}=e;return(0,t.jsx)("button",{className:"".concat("px-4 py-2 rounded font-medium transition-colors"," ").concat({primary:"bg-midnight-600 text-white hover:bg-midnight-700",secondary:"bg-midnight-800 text-midnight-100 hover:bg-midnight-700 border border-midnight-600",danger:"bg-red-600 text-white hover:bg-red-700"}[s]," ").concat(i),...n,children:d})}i(2265)}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=8696)}),_N_E=e.O()}]);